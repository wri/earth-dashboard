define(["exports","./Cartesian2-8417ca3d","./Check-d18af7c4","./when-208fe5b0","./Transforms-a73b3b3b","./WebGLConstants-76bb35d1"],(function(t,e,n,r,a,i){"use strict";var u=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3});function o(t,e,n,a){this[0]=r.defaultValue(t,0),this[1]=r.defaultValue(n,0),this[2]=r.defaultValue(e,0),this[3]=r.defaultValue(a,0)}o.packedLength=4,o.pack=function(t,e,n){return n=r.defaultValue(n,0),e[n++]=t[0],e[n++]=t[1],e[n++]=t[2],e[n++]=t[3],e},o.unpack=function(t,e,n){return e=r.defaultValue(e,0),(n=r.defined(n)?n:new o)[0]=t[e++],n[1]=t[e++],n[2]=t[e++],n[3]=t[e++],n},o.clone=function(t,e){if(r.defined(t))return r.defined(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):new o(t[0],t[2],t[1],t[3])},o.fromArray=function(t,e,n){return e=r.defaultValue(e,0),(n=r.defined(n)?n:new o)[0]=t[e],n[1]=t[e+1],n[2]=t[e+2],n[3]=t[e+3],n},o.fromColumnMajorArray=function(t,e){return o.clone(t,e)},o.fromRowMajorArray=function(t,e){return r.defined(e)?(e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3],e):new o(t[0],t[1],t[2],t[3])},o.fromScale=function(t,e){return r.defined(e)?(e[0]=t.x,e[1]=0,e[2]=0,e[3]=t.y,e):new o(t.x,0,0,t.y)},o.fromUniformScale=function(t,e){return r.defined(e)?(e[0]=t,e[1]=0,e[2]=0,e[3]=t,e):new o(t,0,0,t)},o.fromRotation=function(t,e){var n=Math.cos(t);t=Math.sin(t);return r.defined(e)?(e[0]=n,e[1]=t,e[2]=-t,e[3]=n,e):new o(n,-t,t,n)},o.toArray=function(t,e){return r.defined(e)?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):[t[0],t[1],t[2],t[3]]},o.getElementIndex=function(t,e){return 2*t+e},o.getColumn=function(t,e,n){e=t[r=2*e];var r=t[1+r];return n.x=e,n.y=r,n},o.setColumn=function(t,e,n,r){return e*=2,(r=o.clone(t,r))[e]=n.x,r[1+e]=n.y,r},o.getRow=function(t,e,n){var r=t[e];e=t[e+2];return n.x=r,n.y=e,n},o.setRow=function(t,e,n,r){return(r=o.clone(t,r))[e]=n.x,r[e+2]=n.y,r};var s=new e.Cartesian2;o.getScale=function(t,n){return n.x=e.Cartesian2.magnitude(e.Cartesian2.fromElements(t[0],t[1],s)),n.y=e.Cartesian2.magnitude(e.Cartesian2.fromElements(t[2],t[3],s)),n};var f=new e.Cartesian2;o.getMaximumScale=function(t){return o.getScale(t,f),e.Cartesian2.maximumComponent(f)},o.multiply=function(t,e,n){var r=t[0]*e[0]+t[2]*e[1],a=t[0]*e[2]+t[2]*e[3],i=t[1]*e[0]+t[3]*e[1];e=t[1]*e[2]+t[3]*e[3];return n[0]=r,n[1]=i,n[2]=a,n[3]=e,n},o.add=function(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n},o.subtract=function(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n},o.multiplyByVector=function(t,e,n){var r=t[0]*e.x+t[2]*e.y;e=t[1]*e.x+t[3]*e.y;return n.x=r,n.y=e,n},o.multiplyByScalar=function(t,e,n){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n},o.multiplyByScale=function(t,e,n){return n[0]=t[0]*e.x,n[1]=t[1]*e.x,n[2]=t[2]*e.y,n[3]=t[3]*e.y,n},o.negate=function(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.transpose=function(t,e){var n=t[0],r=t[2],a=t[1];t=t[3];return e[0]=n,e[1]=r,e[2]=a,e[3]=t,e},o.abs=function(t,e){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e[3]=Math.abs(t[3]),e},o.equals=function(t,e){return t===e||r.defined(t)&&r.defined(e)&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},o.equalsArray=function(t,e,n){return t[0]===e[n]&&t[1]===e[n+1]&&t[2]===e[n+2]&&t[3]===e[n+3]},o.equalsEpsilon=function(t,e,n){return n=r.defaultValue(n,0),t===e||r.defined(t)&&r.defined(e)&&Math.abs(t[0]-e[0])<=n&&Math.abs(t[1]-e[1])<=n&&Math.abs(t[2]-e[2])<=n&&Math.abs(t[3]-e[3])<=n},o.IDENTITY=Object.freeze(new o(1,0,0,1)),o.ZERO=Object.freeze(new o(0,0,0,0)),o.COLUMN0ROW0=0,o.COLUMN0ROW1=1,o.COLUMN1ROW0=2,o.COLUMN1ROW1=3,Object.defineProperties(o.prototype,{length:{get:function(){return o.packedLength}}}),o.prototype.clone=function(t){return o.clone(this,t)},o.prototype.equals=function(t){return o.equals(this,t)},o.prototype.equalsEpsilon=function(t,e){return o.equalsEpsilon(this,t,e)},o.prototype.toString=function(){return"("+this[0]+", "+this[2]+")\n("+this[1]+", "+this[3]+")"};var c={POINTS:i.WebGLConstants.POINTS,LINES:i.WebGLConstants.LINES,LINE_LOOP:i.WebGLConstants.LINE_LOOP,LINE_STRIP:i.WebGLConstants.LINE_STRIP,TRIANGLES:i.WebGLConstants.TRIANGLES,TRIANGLE_STRIP:i.WebGLConstants.TRIANGLE_STRIP,TRIANGLE_FAN:i.WebGLConstants.TRIANGLE_FAN,validate:function(t){return t===c.POINTS||t===c.LINES||t===c.LINE_LOOP||t===c.LINE_STRIP||t===c.TRIANGLES||t===c.TRIANGLE_STRIP||t===c.TRIANGLE_FAN}},l=Object.freeze(c);function d(t){t=r.defaultValue(t,r.defaultValue.EMPTY_OBJECT),this.attributes=t.attributes,this.indices=t.indices,this.primitiveType=r.defaultValue(t.primitiveType,l.TRIANGLES),this.boundingSphere=t.boundingSphere,this.geometryType=r.defaultValue(t.geometryType,u.NONE),this.boundingSphereCV=t.boundingSphereCV,this.offsetAttribute=t.offsetAttribute}d.computeNumberOfVertices=function(t){var e,n,a=-1;for(e in t.attributes)t.attributes.hasOwnProperty(e)&&r.defined(t.attributes[e])&&r.defined(t.attributes[e].values)&&(a=(n=t.attributes[e]).values.length/n.componentsPerAttribute);return a};var y=new e.Cartographic,m=new e.Cartesian3,p=new a.Matrix4,h=[new e.Cartographic,new e.Cartographic,new e.Cartographic],N=[new e.Cartesian2,new e.Cartesian2,new e.Cartesian2],I=[new e.Cartesian2,new e.Cartesian2,new e.Cartesian2],b=new e.Cartesian3,C=new a.Quaternion,T=new a.Matrix4,E=new o;d._textureCoordinateRotationPoints=function(t,n,r,i){var u=e.Rectangle.center(i,y),s=e.Cartographic.toCartesian(u,r,m),f=(u=a.Transforms.eastNorthUpToFixedFrame(s,r,p),a.Matrix4.inverse(u,p)),c=N,l=h;l[0].longitude=i.west,l[0].latitude=i.south,l[1].longitude=i.west,l[1].latitude=i.north,l[2].longitude=i.east,l[2].latitude=i.south;for(var d=b,x=0;x<3;x++)e.Cartographic.toCartesian(l[x],r,d),d=a.Matrix4.multiplyByPointAsVector(f,d,d),c[x].x=d.x,c[x].y=d.y;s=a.Quaternion.fromAxisAngle(e.Cartesian3.UNIT_Z,-n,C);var L=a.Matrix3.fromQuaternion(s,T),w=t.length,g=Number.POSITIVE_INFINITY,S=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,O=Number.NEGATIVE_INFINITY;for(x=0;x<w;x++)d=a.Matrix4.multiplyByPointAsVector(f,t[x],d),d=a.Matrix3.multiplyByVector(L,d,d),g=Math.min(g,d.x),S=Math.min(S,d.y),A=Math.max(A,d.x),O=Math.max(O,d.y);var M=o.fromRotation(n,E),R=I;R[0].x=g,R[0].y=S,R[1].x=g,R[1].y=O,R[2].x=A,R[2].y=S;var v=c[0],V=c[2].x-v.x,P=c[1].y-v.y;for(x=0;x<3;x++){var G=R[x];o.multiplyByVector(M,G,G),G.x=(G.x-v.x)/V,G.y=(G.y-v.y)/P}return u=R[0],i=R[1],s=R[2],n=new Array(6),e.Cartesian2.pack(u,n),e.Cartesian2.pack(i,n,2),e.Cartesian2.pack(s,n,4),n},t.Geometry=d,t.GeometryAttribute=function(t){t=r.defaultValue(t,r.defaultValue.EMPTY_OBJECT),this.componentDatatype=t.componentDatatype,this.componentsPerAttribute=t.componentsPerAttribute,this.normalize=r.defaultValue(t.normalize,!1),this.values=t.values},t.GeometryType=u,t.Matrix2=o,t.PrimitiveType=l}));