@import 'css/settings';

.c-climate-scrolly-telling {
    overflow: initial;

    .climate-clock-story {
        .smoke-container {
            position: sticky;
            top: 0px;
            left: 0px;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: $grey-light;
    
            .smoke-text {
                display: flex;
                justify-content: center;
                flex-direction: column;
                position: absolute;
                
                h6, h1 {
                    text-align: center;
                    color: $white;
                    font-family: 'Barlow Condensed';
                }
    
                h6 {
                    font-size: 16px;
                    margin-bottom: 0px;
                }
            }
    
            canvas {
                width: 100%;
                height: 100%;
            }
        }
    }

    .story {

        .sticky-container {
            position: sticky;
            top: 0px;
            left: 0px;
            height: 100vh;

            .wrapper-container {
                position: relative;
                display: flex;
                height: 100%;
                width: 100%;

                .sticky-element {
                    display: flex;
                    width: 100%;
                    align-items: center;
                    justify-content: center;
                    margin: 0px 30px 100px 20px;

                    &.-mobile {
                        justify-content: center;
                    }

                    .climate-chart {
                        position: relative;
                        display: flex;
                        justify-content: center;
                        align-items: center;

                        .chart-axes {
                            width: 100%;
                            animation: fade-in 1s forwards;
                        }

                        .chart-line {
                            position: absolute;
                        }

                        .confidence-shape {
                            position: absolute;
                        }

                        &.-desktop {
                            width: 800px;

                            .chart-line {

                                &.-line-present {
                                    bottom: 127px;
                                    left: 34px;
                                    width: 520px;

                                    &.-animate {
                                        stroke-dasharray: 1000;
                                        stroke-dashoffset: 1000;
                                        animation: dash 3s linear forwards;
                                    }
                                }

                                &.-line-future {
                                    bottom: 219px;
                                    left: 554px;
                                    width: 240px;

                                    &.-animate {
                                        stroke-dasharray: 1000;
                                        stroke-dashoffset: 1000;
                                        animation: dash 3s linear alternate forwards;
                                    }
                                }

                                &.-line-historical {
                                    bottom: 187px;
                                    left: 34px;
                                    width: 154px;

                                    &.-animate {
                                        stroke-dasharray: 300;
                                        stroke-dashoffset: 300;
                                        animation: dash 3s linear forwards;
                                    }
                                }

                                &.-line-projection {
                                    bottom: 187px;
                                    left: 188px;
                                    width: 607px;

                                    &.-animate {
                                        stroke-dasharray: 1000;
                                        stroke-dashoffset: 1000;
                                        animation: dash 3s 3s linear forwards;
                                    }
                                }
                            }

                            .confidence-shape {
                                bottom: 127px;
                                left: 34px;

                                &.-scenario-1 {
                                    width: 520px;
                                }
                                &.-scenario-2 {
                                    width: 95%;
                                    animation: fade-in 1s forwards;
                                }
                                &.-scenario-3 {
                                    width: 95%;
                                    bottom: 34%;
                                    animation: fade-in 1s forwards;
                                }
                            }
                        }
                    }
                }

                .year-container {
                    position: absolute;
                    bottom: 0px;
                    left: 0px;
                    width: 100%;
                    height: 80px;
                    display: flex;
                    justify-content: flex-start;
                    align-items: baseline;
                    font-family: 'Barlow Condensed';
                    padding: 15px 45px 10px 45px;
    
                    .year-value {
                        margin: unset;
                        color: $white;
                        .degrees-container {
                            margin-left: 10px;
                        }
                    }

                    .year-subtitle {
                        color: $white;
                        margin: unset;
                        margin-left: 30px;
                    }
                }

                .marker {
                    position: absolute;
                    transition: all 2s;
                }
            }
        }
    }

    .steps {
        display: flex;
        flex-direction: column;

        &.-mobile {
            align-items: center;
        }
    }

    .visual-sources {
        position: absolute;
        bottom: 16px;
        right: 16px;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        font-family: 'Barlow';
        font-size: 12px;
        line-height: 18px;
        color: $grey-darker;
        z-index: 1;

        &.-climate-story {
            bottom: 96px
        }

        a {
            text-decoration: underline;
        }
    }
}

@keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes dash {
    to { stroke-dashoffset: 0; }
}
